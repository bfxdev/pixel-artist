var pixart=function(t){function e(e){for(var r,s,h=e[0],a=e[1],l=e[2],p=0,u=[];p<h.length;p++)s=h[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&u.push(o[s][0]),o[s]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);for(d&&d(e);u.length;)u.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],r=!0,h=1;h<i.length;h++){var a=i[h];0!==o[a]&&(r=!1)}r&&(n.splice(e--,1),t=s(s.s=i[0]))}return t}var r={},o={0:0},n=[];function s(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=r,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var h=window.webpackJsonppixart=window.webpackJsonppixart||[],a=h.push.bind(h);h.push=e,h=h.slice();for(var l=0;l<h.length;l++)e(h[l]);var d=a;return n.push([1,1]),i()}([,function(t,e,i){"use strict";i.r(e),i.d(e,"Color",(function(){return h})),i.d(e,"Palette",(function(){return a})),i.d(e,"palettes",(function(){return l})),i.d(e,"matrices",(function(){return p})),i.d(e,"WrapMode",(function(){return r})),i.d(e,"PixelArtist",(function(){return u}));var r,o=i(0),n=i.n(o),s={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},h=function(){function t(t){this.R=0,this.G=0,this.B=0,this.A=0,this.L=0,this.a=0,this.b=0,void 0!==t&&this.set(t)}return t.prototype.set=function(e){if(e instanceof t)return Object.assign(this,e);if("number"==typeof e)return this.setAlpha(e%256),this.setRGB(e/256/256/256&255,e/256/256&255,e/256&255);if("string"==typeof e){var i=e.replace(" ","").toLowerCase();if(s.hasOwnProperty(i)&&(i=s[i]),7==i.length&&"#"==i[0]){var r=parseInt(i[1]+i[2],16),o=parseInt(i[3]+i[4],16),n=parseInt(i[5]+i[6],16);if(isNaN(r)||isNaN(o)||isNaN(n))throw Error('Could not convert "'+i+'"');return this.setAlpha(255),this.setRGB(r,o,n)}throw Error('Not a web color "'+i+'"')}return this},t.prototype.setRGB=function(t,e,i){return this.R=Math.min(255,Math.max(0,Math.round(t))),this.G=Math.min(255,Math.max(0,Math.round(e))),this.B=Math.min(255,Math.max(0,Math.round(i))),this.updateFromRGB()},t.prototype.setAlpha=function(t){return this.A=Math.min(255,Math.max(0,Math.round(t))),this},t.prototype.toNumber=function(){return 256*(256*(256*this.R+this.G)+this.B)+this.A},t.prototype.toString=function(){return"#"+(this.R<16?"0":"")+this.R.toString(16)+(this.G<16?"0":"")+this.G.toString(16)+(this.B<16?"0":"")+this.B.toString(16)},t.prototype.mix=function(t,e){return void 0===e&&(e=.5),this.setRGB(this.R*(1-e)+t.R*e,this.G*(1-e)+t.G*e,this.B*(1-e)+t.B*e),this.setAlpha(this.A*(1-e)+t.A*e)},t.prototype.setLinearRGB=function(t,e,i,r){return this.setRGB(255*this.encodeGamma(t,r),255*this.encodeGamma(e,r),255*this.encodeGamma(i,r))},t.prototype.decodeGamma=function(t,e){return void 0===e?t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4):Math.pow(t,e)},t.prototype.encodeGamma=function(t,e){return void 0===e?t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055:Math.pow(t,1/e)},t.prototype.correctGamma=function(t){return this.setRGB(255*Math.pow(this.R/255,t),255*Math.pow(this.G/255,t),255*Math.pow(this.B/255,t))},t.prototype.reduceDepth=function(t,e,i){return this.R=Math.min(255,Math.round(this.R/(1<<8-t)<<8-t)),this.G=Math.min(255,Math.round(this.G/(1<<8-e)<<8-e)),this.B=Math.min(255,Math.round(this.B/(1<<8-i)<<8-i)),this},t.prototype.updateFromRGB=function(t){var e=this.decodeGamma(this.R/255,t),i=this.decodeGamma(this.G/255,t),r=this.decodeGamma(this.B/255,t),o=100*(.4124*e+.3576*i+.1805*r)/95.0489,n=100*(.2126*e+.7152*i+.0722*r)/100,s=100*(.0193*e+.1192*i+.9504*r)/108.884;return o=o<=.008856?7.787*o+4/29:Math.pow(o,1/3),n=n<=.008856?7.787*n+4/29:Math.pow(n,1/3),s=s<=.008856?7.787*s+4/29:Math.pow(s,1/3),this.L=116*n-16,this.a=500*(o-n),this.b=200*(n-s),this},t.prototype.distance=function(t){var e=this.L-t.L,i=Math.sqrt(this.a*this.a+this.b*this.b),r=i-Math.sqrt(t.a*t.a+t.b*t.b),o=this.a-t.a,n=this.b-t.b,s=Math.sqrt(o*o+n*n-r*r);return Math.sqrt(e*e+r/(1+.045*i)*r/(1+.045*i)+s/(1+.015*i)*s/(1+.015*i))},t}(),a=function(){function t(t,e,i,r){this.redDepth=8,this.greenDepth=8,this.blueDepth=8,this.colors=new Map,void 0!==e&&(this.redDepth=e),void 0!==i&&(this.greenDepth=i),void 0!==r&&(this.blueDepth=r),void 0!==t&&this.setColors(t)}return t.prototype.setColors=function(t){if(this.colors=new Map,t instanceof n.a)for(var e=0;e<t.getHeight();e++)for(var i=0;i<t.getWidth();i++){(o=new h(t.getPixelColor(i,e))).reduceDepth(this.redDepth,this.greenDepth,this.blueDepth),o.setAlpha(255),this.colors.set(o.toNumber(),o)}else if(t instanceof Array&&t.length>0)for(var r=0;r<t.length;r++){var o;(o=new h(t[r])).reduceDepth(this.redDepth,this.greenDepth,this.blueDepth),this.colors.set(o.toNumber(),o)}return this},t.prototype.getClosestColor=function(t,e){var i=void 0===e?new h:e;if(this.isDiscrete())for(var r=1e50,o=0,n=Array.from(this.colors.values());o<n.length;o++){var s=n[o],a=t.distance(s);a<r&&(r=a,i.set(s))}else i.set(t),i.reduceDepth(this.redDepth,this.greenDepth,this.blueDepth);return i},t.prototype.getColorMatch=function(t){if(this.isDiscrete()){for(var e=1e50,i=-1,r=new h,o=0,n=0,s=Array.from(this.colors.values());n<s.length;n++){var a=s[n];(g=t.distance(a))<e&&(e=g,i=o,r.set(a),r.setAlpha(t.A)),o++}var l=1e50,d=-1,p=new h;o=0;for(var u=0,c=Array.from(this.colors.values());u<c.length;u++){var g;a=c[u];(g=new h(r).mix(a).distance(t))<l&&(l=g,d=o,p.set(a),p.setAlpha(t.A)),o++}return{closestColor:r,closestDistance:e,closestIndex:i,mixColor:p,mixDistance:l,mixIndex:d}}r=new h(t).reduceDepth(this.redDepth,this.greenDepth,this.blueDepth);return(p=new h(t).setRGB(2*t.R-r.R,2*t.G-r.G,2*t.B-r.B)).reduceDepth(this.redDepth,this.greenDepth,this.blueDepth),{closestColor:r,closestDistance:t.distance(r),closestIndex:0,mixColor:p,mixDistance:t.distance(p),mixIndex:0}},t.prototype.isDiscrete=function(){return this.colors.size>0},t.prototype.count=function(){return this.isDiscrete()?this.colors.size:(1<<this.redDepth)*(1<<this.greenDepth)*(1<<this.blueDepth)},t.prototype.toString=function(){for(var t="",e=0,i=Array.from(this.colors.values());e<i.length;e++){var r=i[e];t+=(t.length>0?", ":"")+"0x"+r.toNumber().toString(16)}return"["+t+"]"},t}(),l={CPC:new a([255,33023,63743,2147483903,2147516671,2147547391,4160749823,4160782591,4160813311,8388863,8421631,8452351,2155872511,2155905279,2155935999,4169138431,4169171199,4169201919,16515327,16548095,16578815,2163998975,2164031743,2164062463,4177264895,4177297663,4177328383]),AAP64:new a([264447,269488383,940843263,1880369407,2954897663,3627819263,4167567615,4171241727,4174659839,4177281279,3505414399,2564309247,1488990463,278931711,410532095,542128383,270541055,271868159,677167359,547150079,550813951,2700925183,4177328383,4176527615,4174690559,4037054719,3899158783,3091765503,2016968959,1076908287,538980607,538712319,807938303,1883257087,3094626559,3634651391,4040202495,3638618367,2964902143,2291181823,1752467711,1213489407,808993023,1076113663,1479555327,2286964991,3094636799,3904151807,3773102335,3099392255,2157502719,1485617407,1081901311,543443199,813981951,1487702271,2430384383,3371491583,3771771135,3232794879,2693030143,2019840255,1481392383,1077424383]),Apple2:new a([255,1747468543,1077180671,3627872511,273957119,2155905279,546631935,3098867967,1078460671,3630696703,3903371519,549456127,3100147967,2429860095,4177328383]),CGA:new a([255,43263,11010303,11053311,2818572543,2818615551,2824077567,2829625599,1347703039,1347746047,1358713087,1358756095,4166275327,4166318335,4177285375,4177328383]),C64:new a([255,4177328383,2285383935,1622456575,2285670655,1352681727,1076922623,3100406015,2287216895,1346371839,3093848319,1347440895,2021161215,2430634239,2020131071,2560399615]),Fantasy24:new a([405014783,945035519,2693538047,3903596799,3906511103,2824607999,406599935,3899140351,3904139519,2690662655,1882464511,1883246847,672925951,942151935,1749825791,2424072447,543451391,3895986431,1075841279,949786879,2551711999,806619391,1342966015,806095103]),Jewel15:new a([807151871,1612984575,3089635583,3496481023,4039391487,4041775359,3635706111,3094896895,2017487103,1348505855,1217177855,1220587775,1893759231,1887478015,2561456383]),MSX:new a([255,951601407,1892710655,1481957631,2155147519,3093057791,1624828159,3630455039,4169693439,3368048895,3637543167,950026495,2959388927,3368863999,4177328383]),NES:new a([1212696831,547071,555263,553215,939544831,1476399359,1476395263,1073742079,268435711,1573119,1835263,1581311,255,2694881535,4765951,137421055,1478023423,2684922111,3489683711,3490709759,2686451967,1614807295,139985151,6815999,6820095,6320383,4177066239,547420415,1350105343,2557016319,4167629055,4168134911,4168116479,4169144575,3231187199,1890582783,683679999,13136127,12636415,673720575,2698574079,2965436671,3501783295,4173396223,4173390079,4173381887,4173897983,3906504959,3370160383,2833817855,2431174911,2430658815,2829625599]),RGB:new a([],8,8,8),RGB332:new a([],3,3,2),RGB444:new a([],4,4,4),RGB565:new a([],5,6,5),Spectrum:new a([255,49407,3221225727,3221274879,12583167,12632319,3233808639,3233857791,63743,4160749823,4160813311,16515327,16578815,4177264895,4177328383]),Steam16:new a([540549375,945834239,1215582463,2694609151,1886669055,1885096191,1614297343,941633791,269228287,673200383,1077436671,1213231359,1617987839,2023006463,2696460543,3234908415]),Sweetie16:new a([404498687,1478777087,2956742911,3900461311,4174147839,2700112127,951345407,544241919,674523391,945604863,1084551423,1894576383,4042584319,2427502847,1349288191,809259263]),Tandy:new a([255,2013280511,2281705727,2283274495,3495442687,673982719,6314239,1482686719,8141055,813433087,8919295,143393023,1490039039,3700991,939555071,1345791,402688255,2015674623,413964543,1626659071,1610637567,2686232831,3764449535,2694846719,4041236735,3371983103,2021161215,4174696703,4177328383,2017198335,3229360383,2160075007,3493093631,549744895,953178367,811649279,2164035839,1761390847,1624570111,2024601855,1480380671,4167356671,3223357695,3503618303,3506229503,3103324415,4177311999,4043094271,2835151103,4172871935,4170483967,4177307903,4171823359,4173097215,2424895743,4168657151,2700900607,3094149375,545831167]),Teletext:new a([255,63743,4160749823,4160813311,16515327,16578815,4177264895,4177328383]),VIC20:new a([255,4177328383,2015895807,2161432831,2824646911,1352681727,1076922623,3100406015,2826193151,3904145663,3093848319,3237804287,3902599423,2430634239,2154875135,4177309951])},d=function(t){this.original=new h,this.match={closestColor:new h,closestDistance:1e6,closestIndex:0,mixColor:new h,mixDistance:1e6,mixIndex:0},this.isTransparent=!1,this.isEdge=!1,this.isOutline=!1,this.layer=0,this.frontier=new h,this.colors=[],this.dithered=new h,this.final=new h,this.original.set(t)},p={Bayer2x2:[[.25,.5],[.75,0]],Bayer4x4:[[5/16,9/16,.375,.625],[.8125,1/16,.875,.125],[7/16,.6875,.25,.5],[.9375,3/16,.75,0]],Bayer8x8:[[21/64,37/64,25/64,41/64,22/64,38/64,26/64,42/64],[53/64,5/64,57/64,9/64,54/64,6/64,58/64,10/64],[29/64,45/64,17/64,33/64,30/64,46/64,18/64,34/64],[61/64,13/64,49/64,1/64,62/64,14/64,50/64,2/64],[23/64,39/64,27/64,43/64,.3125,.5625,.375,.625],[55/64,7/64,59/64,11/64,.8125,4/64,.875,.125],[31/64,47/64,19/64,35/64,.4375,.6875,.25,.5],[63/64,15/64,51/64,3/64,.9375,.1875,.75,0]]};!function(t){t.Uniform="U",t.Tiled="T",t.Extended="E"}(r||(r={}));var u=function(){function t(t){this.width=0,this.height=0,this.image=[],this.transparency=.5,this.outline={width:0,colors:[]},this.edge={width:0,colors:[]},this.edgeMixRatio=.5,this.wrapModeTop=r.Uniform,this.wrapModeRight=r.Uniform,this.wrapModeBottom=r.Uniform,this.wrapModeLeft=r.Uniform,this.wrapUniformPixel=new d(0),this.finalScale=1,this.finalBorder=0,this.ditheringMatrix=[],this.ditheringLevel=0,this.palette=t}return t.prototype.import=function(t){this.width=t.getWidth(),this.height=t.getHeight(),this.image=new Array(this.width);for(var e=0;e<this.width;e++){this.image[e]=new Array(this.height);for(var i=0;i<this.height;i++)this.image[e][i]=new d(t.getPixelColor(e,i))}},t.prototype.getPixel=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height?this.image[t][e]:e<0&&this.wrapModeTop===r.Uniform||t>=this.width&&this.wrapModeRight===r.Uniform||e>=this.height&&this.wrapModeBottom===r.Uniform||t<0&&this.wrapModeLeft===r.Uniform?this.wrapUniformPixel:(t<0&&this.wrapModeLeft===r.Tiled||t>=this.width&&this.wrapModeRight===r.Tiled?t=(t%this.width+this.width)%this.width:(t<0&&this.wrapModeLeft===r.Extended||t>=this.width&&this.wrapModeRight===r.Extended)&&(t=Math.min(this.width-1,Math.max(0,t))),e<0&&this.wrapModeTop===r.Tiled||e>=this.height&&this.wrapModeBottom===r.Tiled?e=(e%this.height+this.height)%this.height:(e<0&&this.wrapModeTop===r.Extended||e>=this.height&&this.wrapModeBottom===r.Extended)&&(e=Math.min(this.height-1,Math.max(0,e))),this.image[t][e])},t.prototype.determineColorMatches=function(){for(var t=0;t<this.height;t++)for(var e=0;e<this.width;e++)this.image[e][t].match=this.palette.getColorMatch(this.image[e][t].original)},t.prototype.isTransparent=function(t){return"number"==typeof this.transparency?t.original.A<=255*this.transparency:Math.floor(t.original.toNumber()/256)==Math.floor(this.transparency.toNumber()/256)},t.prototype.getOrientedColors=function(t,e,i){void 0===i&&(i=!1);var r=new h(t instanceof Array?t[i?2:0]:t),o=new h(t instanceof Array?t[i?3:1]:t),n=new h(t instanceof Array?t[i?0:2]:t),s=new h(t instanceof Array?t[i?1:3]:t),a=[{dx:0,dy:-1,color:r},{dx:1,dy:0,color:o},{dx:0,dy:1,color:n},{dx:-1,dy:0,color:s}];if(e){var l=new h(r).mix(o),d=new h(r).mix(s),p=new h(n).mix(o),u=new h(n).mix(s);a.push({dx:1,dy:-1,color:l}),a.push({dx:1,dy:1,color:p}),a.push({dx:-1,dy:1,color:u}),a.push({dx:-1,dy:-1,color:d})}return a},t.prototype.getSurroundingPixels=function(t,e,i){for(var r=[],o=0;o<i.length;o++)r.push(this.getPixel(t+i[o].dx,e+i[o].dy));return r},t.prototype.determineTransparencyFrontiers=function(){this.wrapUniformPixel.isTransparent=this.isTransparent(this.wrapUniformPixel);for(var t=0;t<this.height;t++)for(var e=0;e<this.width;e++)this.image[e][t].isTransparent=this.isTransparent(this.image[e][t]);for(var i=0;i<Math.max(this.outline.width,this.edge.width);i++){for(t=0;t<this.height;t++)for(e=0;e<this.width;e++){var r=this.image[e][t];if(i<this.outline.width&&r.isTransparent&&!r.isOutline){var o=this.getSurroundingPixels(e,t,this.outline.colors);for(var n in o)!o[n].isOutline&&o[n].isTransparent||r.colors.push(this.outline.colors[n])}if(i<this.edge.width&&!r.isTransparent&&!r.isEdge){o=this.getSurroundingPixels(e,t,this.edge.colors);for(var n in o)(o[n].isEdge||o[n].isTransparent)&&r.colors.push(this.edge.colors[n])}}for(t=0;t<this.height;t++)for(e=0;e<this.width;e++)if(!this.image[e][t].isEdge&&!this.image[e][t].isOutline){if((r=this.image[e][t]).isOutline=r.colors.length>0&&r.isTransparent,r.isEdge=r.colors.length>0&&!r.isTransparent,r.isOutline||r.isEdge){var s=0,h=0,a=0,l=0;for(var n in r.colors)s+=r.colors[n].color.R,h+=r.colors[n].color.G,a+=r.colors[n].color.B,l+=r.colors[n].color.A;r.frontier.setRGB(s/r.colors.length,h/r.colors.length,a/r.colors.length),r.frontier.setAlpha(l/r.colors.length)}if(r.isEdge){var d=this.edgeMixRatio>=0&&this.edgeMixRatio<=1?1-this.edgeMixRatio:(1+i)/(1+this.edge.width);r.frontier.mix(r.original,d)}r.frontier.set(this.palette.getClosestColor(r.frontier))}}},t.prototype.determineDithering=function(){var t=this.ditheringMatrix.length;if(0===this.ditheringMatrix.length||this.ditheringLevel<=0)for(var e=0;e<this.height;e++)for(var i=0;i<this.width;i++)this.image[i][e].dithered.set(this.image[i][e].match.closestColor);else{var r=this.ditheringMatrix[0].length;for(e=0;e<this.height;e++)for(i=0;i<this.width;i++){var o=this.image[i][e].match,n=o.mixDistance/o.closestDistance;n>=this.ditheringLevel&&this.ditheringMatrix[i%r][e%t]>=n-this.ditheringLevel?this.image[i][e].dithered.set(o.mixColor):this.image[i][e].dithered.set(o.closestColor)}}},t.prototype.finalize=function(){for(var t=0;t<this.height;t++)for(var e=0;e<this.width;e++)this.image[e][t].isOutline||this.image[e][t].isEdge?this.image[e][t].final=this.image[e][t].frontier:this.image[e][t].final=this.image[e][t].dithered},t.prototype.export=function(){for(var t=new n.a((this.width+2*this.finalBorder)*this.finalScale,(this.height+2*this.finalBorder)*this.finalScale),e=0;e<t.getHeight();e++)for(var i=0;i<t.getWidth();i++){var r=this.getPixel(Math.floor(i/this.finalScale)-this.finalBorder,Math.floor(e/this.finalScale)-this.finalBorder);t.setPixelColor(r.final.toNumber(),i,e)}return t},t.prototype.setWrapMode=function(t,e,i,o,n){return void 0===t&&(t=r.Uniform),void 0===e&&(e=r.Uniform),void 0===i&&(i=r.Uniform),void 0===o&&(o=r.Uniform),void 0===n&&(n=0),this.wrapModeTop=t,this.wrapModeRight=e,this.wrapModeBottom=i,this.wrapModeLeft=o,this.wrapUniformPixel=new d(n),this},t.prototype.setFinalFrame=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=0),this.finalScale=Math.max(1,Math.round(t)),this.finalBorder=Math.max(0,Math.round(e)),this},t.prototype.setDithering=function(t,e){void 0===e&&(e=.5),this.ditheringMatrix=t,this.ditheringLevel=e},t.prototype.setOutline=function(t,e,i){return void 0===t&&(t=1),void 0===e&&(e=255),void 0===i&&(i=!1),this.outline.width=t,this.outline.colors=this.getOrientedColors(e,i,!0),this},t.prototype.setEdge=function(t,e,i,r){return void 0===t&&(t=1),void 0===e&&(e=255),void 0===i&&(i=!1),void 0===r&&(r=.5),this.edge.width=t,this.edgeMixRatio=r,this.edge.colors=this.getOrientedColors(e,i,!1),this},t.prototype.setTransparency=function(t){return void 0===t&&(t=.5),this.transparency=t,this},t.prototype.render=function(t){return this.import(t),this.determineColorMatches(),this.determineDithering(),this.determineTransparencyFrontiers(),this.finalize(),this.export()},t}()}]);